"use strict";

var Readable = require('stream').Readable;

var QR = require('./qr-base').QR;

var BITMAP_OPTIONS = {
    parse_url: false,
    ec_level: 'M',
    size: 5,
    margin: 4,
    customize: null
};

var VECTOR_OPTIONS = {
    parse_url: false,
    ec_level: 'M',
    margin: 1,
    size: 0
};

function get_options(options, force_type) {
    if (typeof options === 'string') {
        options = { 'ec_level': options }
    } else {
        options = options || {};
    }
    var _options = {
        type: String(force_type || options.type || 'png').toLowerCase()
    };

    var defaults = _options.type == 'png' ? BITMAP_OPTIONS : VECTOR_OPTIONS;

    for (var k in defaults) {
        _options[k] = k in options ? options[k] : defaults[k];
    }

    return _options;
}

function qr_image(text, options) {
    options.type = 'svg';
    if (!text) {
        return false;
    }
    //////////////////////PROCESS OPTIONS/////////////////////
    options.shape = options.shape ? options.shape : 'default';
    options.color = options.color ? options.color : 'black';
    options.margin = options.margin ? options.margin : 0;
    options.background = options.background ? options.background : 'rgba(0,0,0,0)';
    options.fill = options.fill ? options.fill : 'solid';
    options.eye_frame = options.eye_frame ? options.eye_frame : 'default';
    options.eye = options.eye ? options.eye : 'default';
    let customization = options;


    var matrix = QR(text, options.ec_level, options.parse_url);
    let return_stream = '';
    let qr_dimensions = (matrix[0].length) * 6;
    return_stream += `<svg viewBox="0 0 ${((matrix[0].length) * 6) + (customization.margin * 2)} ${((matrix[0].length) * 6) + (customization.margin * 2)}" xmlns="http://www.w3.org/2000/svg">
    <rect x="0" y="0" width="${((matrix[0].length) * 6) + (customization.margin * 2)}" height="${((matrix[0].length) * 6) + (customization.margin * 2)}" fill="${customization.background}" />
    <g transform="translate(${customization.margin},${customization.margin})"><g><defs><mask id="gmask"><g>`;

    ////////////////////////////////////////////////////////////////////
    ////////////////////////CREATE QR BODY//////////////////////////////
    ////////////////////////////////////////////////////////////////////

    for (var i = 0; i < matrix.length; i++) {
        for (var j = 0; j < matrix[i].length; j++) {
            if (!(i < 7 && j < 7) && !(i > (matrix.length - 8) && j < 7) && !(i < 7 && j > (matrix.length - 8))) {
                if ((matrix[i][j]) == 1) {
                    if (customization.shape == '3') {
                        return_stream += `<polygon transform="translate(${(j*6)} ${(i*6)}) scale(0.045)" style="fill: rgb(255, 255, 255);" points="0,50 50,100 100,50 50,0"/>`
                    } else if (customization.shape == '2') {
                        return_stream += `<path transform="translate(${(j*6)} ${(i*6)}) scale(0.06)" style="fill: rgb(255, 255, 255);fill-rule:evenodd;clip-rule:evenodd;" d="M49.984,99.824C45.848,69.47,28.497,53.961-0.345,49.773
                        c29.054-3.697,45.791-19.659,50.348-49.949c4.404,29.487,20.907,45.691,49.652,49.975C70.729,54.051,54.532,70.407,49.984,99.824z"/>`
                    } else if (customization.shape == '1') {
                        return_stream += `<circle style="fill: rgb(255, 255, 255);" cx="${(j*6) + 3}" cy="${(i*6)+3}" r="2" />`;
                    } else {
                        return_stream += `<rect style="fill: rgb(255, 255, 255);" x="${j*6}" y="${i*6}" width="6" height="6" />`;
                    }
                }
            }
        }
    }

    ////////////////////////////////////////////////////////////////////
    ////////////////////CREATE QR EYE //////////////////////////////////
    ////////////////////////////////////////////////////////////////////
    return_stream += geteye(matrix.length, customization.eye);
    return_stream += geteyeframe(matrix.length, customization.eye_frame);

    return_stream += setcolors(((matrix[0].length) * 6) + (customization.margin * 2), customization);
    return return_stream;
}

function geteye(x, customization) {
    let eye = '';
    if (customization == 'rotary') {
        eye = `<path style="fill:rgb(255,255,255)" transform="translate(42,20) scale(0.007)" d="M00 5695l-203 246 -61 -53 211 -237c-35,-36 -62,-62 -97,-88l53 -53c79,79 150,141 238,211l-44 53c-27,-27 -62,-53 -97,-79l0 0 0 0zm-405 -599l-335 194c9,17 27,44 36,70l334 -194c-17,-35 -26,-44 -35,-70l0 0zm211 308l-185 159 97 -273c-17,-18 -26,-36 -44,-62l-326 220c18,26 36,44 53,70l194 -140 -88 273c9,17 26,44 53,61l299 -255c-18,-18 -44,-35 -53,-53l0 0 0 0zm440 475c53,27 97,62 159,88l35 -61c-79,-35 -158,-88 -220,-132l-220 325c79,53 158,97 246,150l36 -62 -177 -105 53 -79 124 70 26 -53c-35,-26 -70,-44 -115,-70l53 -71 0 0zm1083 -1197c-308,0 -555,-246 -555,-554 0,-300 247,-555 555,-555 299,0 546,255 546,555 0,308 -247,554 -546,554l0 0zm9 -185c194,0 361,-167 361,-369 0,-168 -115,-308 -273,-352 0,-18 -9,-88 -9,-88l-185 0c0,0 0,79 -9,96 -149,44 -255,185 -255,344 0,202 167,369 370,369l0 0 0 0zm-810 -2447l0 -17c-9,-106 70,-185 176,-194 106,-9 194,70 203,176l0 18c0,96 -71,184 -177,193 -105,9 -193,-70 -202,-176l0 0zm70 -9c0,71 62,115 132,115 62,-9 115,-62 115,-123 0,-9 0,-9 0,-18 -9,-62 -71,-114 -141,-106 -62,0 -114,53 -106,124l0 8 0 0zm801 97c-35,0 -52,0 -79,0l97 -202 88 -176 79 8 53 168 62 229c-35,0 -53,-9 -79,-9l-27 -71c-53,-8 -105,-8 -158,-17l-36 70 0 0zm62 -132c44,0 79,9 123,9l-26 -79 -26 -79 -36 79 -35 70zm-387 -176l35 317 88 -9 -35 -308 123 -9 0 -70c-141,9 -202,9 -334,35l8 62 115 -18 0 0zm17 4278l-26 229 -114 -255c-27,-9 -44,-9 -71,-18l-88 379c26,9 53,17 79,17l53 -228 115 255c26,9 52,17 79,9l44 -388c-18,0 -44,0 -71,0l0 0zm2236 -818l-281 -159 -36 62 335 193 132 -237 -53 -27 -97 168 0 0zm-422 52l378 124c-9,17 -17,26 -17,35 -9,9 -18,17 -27,35l-61 -26 -106 132 35 61c-17,18 -35,36 -53,53l-149 -255 -62 -88 62 -71 0 0zm44 88l44 71 35 79 62 -79 17 -18 -158 -53zm-405 520c9,26 17,61 26,97 0,26 -9,52 -17,70 -18,44 -44,71 -88,97 -88,53 -203,18 -256,-71 -8,-8 -8,-17 -8,-26 -18,-18 -18,-44 -18,-70 0,-71 35,-132 97,-168 88,-52 202,-26 264,71l0 0 0 0zm-44 97c0,-27 -9,-44 -18,-71 -35,-53 -114,-79 -167,-44 -44,27 -62,71 -62,115 0,17 0,35 18,61 0,0 0,9 9,18 35,44 105,53 149,26 18,-9 27,-17 36,-26 17,-27 35,-53 35,-79l0 0 0 0zm185 -467l158 176 -273 -79c-17,18 -35,18 -53,35l229 317c27,-18 44,-35 62,-53l-141 -185 273 80c18,-18 44,-36 62,-53l-273 -291c-9,18 -27,35 -44,53l0 0 0 0zm1716 -1452c0,35 0,79 0,105l0 9 -9 0c-132,79 -299,123 -475,132 0,18 -18,167 -18,194 159,44 309,132 414,237l9 9 0 9c-9,62 -35,141 -62,194l0 9 -8 0c-150,44 -317,44 -485,0 -8,17 -61,167 -70,184 141,88 264,212 335,344l8 9 -8 8c-18,53 -62,124 -97,168l0 8 -18 0c-150,0 -317,-44 -466,-123 -9,18 -106,150 -124,167 115,115 203,273 238,423l9 0 -9 9c-35,44 -97,105 -141,141l0 8 -17 0c-141,-44 -300,-132 -414,-246 -18,9 -141,106 -159,123 80,141 124,308 124,458l0 17 -9 9c-44,36 -123,80 -176,97l0 0 -9 0c-132,-79 -255,-202 -343,-343 -18,9 -168,70 -194,79 26,79 35,167 35,247 0,88 -9,167 -35,246l0 0 -9 9c-44,17 -132,44 -185,53l-17 0 0 -9c-115,-106 -203,-255 -247,-414 -17,0 -176,18 -193,26 0,168 -53,335 -133,467l0 9 -8 0c-53,9 -141,9 -203,0l0 0 -9 -9c-79,-132 -123,-299 -123,-467 -26,-8 -185,-26 -211,-26 -44,159 -132,308 -238,414l-9 9 -8 0c-62,-9 -141,-36 -194,-62l-9 0 0 -9c-17,-70 -35,-158 -35,-237 0,-80 18,-168 35,-247 -17,-9 -158,-62 -185,-70 -88,140 -211,272 -343,343l-9 0 -9 0c-52,-26 -123,-62 -167,-97l-9 -9 0 -17c0,-150 44,-317 124,-458 -18,-18 -150,-115 -168,-123 -114,114 -273,202 -413,237l-9 0 -9 0c-44,-44 -106,-96 -141,-140l-9 -9 9 -9c35,-150 123,-299 238,-423 -9,-17 -115,-140 -123,-167 -150,88 -317,132 -467,132l-9 0 -9 -9c-35,-44 -79,-123 -96,-176l-9 -8 9 0c79,-141 202,-265 343,-344 -9,-26 -71,-167 -79,-185 -168,36 -344,36 -484,0l-9 -8 -9 0c-18,-53 -35,-141 -44,-194l-9 -9 9 -9c106,-114 255,-193 422,-246 0,-18 -26,-185 -26,-203 -176,-8 -343,-52 -475,-132l-9 0 0 -9c0,-26 0,-61 0,-96 0,-36 0,-71 0,-106l0 -9 9 0c132,-79 299,-123 475,-123 0,-26 18,-185 26,-202 -167,-53 -316,-133 -422,-247l-9 0 0 -9c9,-61 35,-149 53,-193l9 -9 9 0c140,-44 316,-44 484,-9 8,-18 61,-158 70,-185 -141,-79 -264,-202 -343,-343l0 -9 0 0c26,-53 70,-132 105,-176l0 -9 9 0c159,0 326,44 467,132 17,-17 114,-158 132,-176 -115,-114 -203,-264 -247,-414l0 -8 0 -9c44,-44 106,-106 150,-141l9 0 0 0c149,35 308,123 422,238 18,-9 132,-106 150,-115 -79,-141 -123,-308 -123,-458l0 -17 9 -9c44,-35 114,-79 176,-97l0 -9 8 9c132,71 256,194 344,343 17,-8 176,-79 193,-88 -17,-79 -26,-158 -26,-246 0,-79 9,-158 26,-238l9 -8 9 0c44,-27 132,-45 185,-53l9 0 8 0c106,114 194,264 247,422 18,0 185,-17 202,-26 0,-167 53,-335 132,-467l0 -9 9 0c53,-8 141,-8 203,0l0 0 8 9c80,132 124,300 124,467 26,9 185,26 202,26 53,-158 141,-308 247,-414l8 -8 9 0c53,8 141,26 194,53l0 0 9 8c17,80 26,159 26,238 0,88 -9,167 -26,246 17,9 167,80 193,88 80,-149 203,-272 344,-343l0 -9 9 9c52,18 132,62 176,97l8 9 0 17c0,150 -52,317 -132,458 18,9 150,115 168,123 114,-114 272,-202 422,-237l0 -9 9 9c44,35 106,97 141,141l9 8 -9 9c-35,150 -123,299 -238,423 9,17 106,141 123,158 150,-79 317,-123 467,-123l9 0 8 9c36,44 80,123 97,167l9 9 -9 9c-79,132 -202,255 -343,343 9,26 70,167 79,185 159,-35 335,-44 484,0l9 0 0 9c18,52 44,132 53,193l0 9 -9 9c-105,105 -255,193 -414,238 0,26 18,184 27,202 167,9 334,53 466,132l9 0 0 9c0,26 0,61 0,97l0 0 0 0zm-4612 -1787l246 281c35,36 79,27 123,-8 326,-256 731,-405 1171,-405 431,0 845,149 1171,405 44,35 88,44 123,8l255 -281c27,-36 27,-80 -26,-124 -431,-334 -951,-537 -1523,-537 -572,0 -1109,203 -1523,537 -53,44 -53,88 -17,124l0 0zm8 1179c-26,-17 -52,-35 -79,-26 -17,9 -35,26 -44,61 -114,405 -114,749 0,1154 9,26 18,52 44,52 18,9 44,0 79,-26l784 -528c35,-18 53,-53 53,-79 0,-27 -18,-53 -53,-71l-784 -537 0 0zm176 -466c0,26 36,44 62,53l854 413c35,18 62,18 88,9 26,-18 44,-44 44,-79l70 -951c0,-44 0,-70 -17,-79 -18,-18 -44,-18 -71,-9 -413,97 -704,273 -1003,572 -18,27 -35,53 -27,71l0 0 0 0zm9 2165c0,9 18,35 35,53 291,308 590,484 995,581 27,9 53,9 71,-9 17,-9 26,-35 26,-79 0,-9 -70,-951 -70,-951 -9,-35 -18,-61 -44,-79 -27,-18 -53,-18 -88,0l-854 414c-27,17 -62,35 -71,61 0,0 0,0 0,9l0 0 0 0zm1347 -475c335,0 607,-282 607,-616 0,-335 -272,-608 -607,-608 -334,0 -616,273 -616,608 0,334 282,616 616,616l0 0zm255 1091c18,9 36,18 80,0 404,-96 704,-264 994,-572 18,-17 35,-44 27,-61 0,-27 -18,-44 -62,-62l-854 -414c-35,-17 -61,-17 -88,0 -26,18 -44,44 -44,79l-70 942c0,36 0,71 17,88l0 0 0 0zm1277 -1100c26,18 53,35 79,26 18,-8 35,-26 44,-61 123,-405 123,-748 0,-1153 -9,-27 -18,-53 -44,-62 -18,-9 -44,0 -79,26l-784 537c-35,18 -44,44 -44,71 0,35 9,61 44,79l784 537 0 0zm-176 -1699c0,-18 -9,-35 -27,-53 -290,-308 -590,-484 -1003,-581 -27,-9 -53,-9 -71,9 -17,9 -17,35 -17,79l70 951c0,35 18,62 44,79 27,18 53,9 88,-9l854 -404c26,-18 53,-27 62,-62 0,0 0,0 0,-9l0 0 0 0zm-3645 1690l361 -105c35,-9 71,-44 62,-88 -132,-678 35,-1224 431,-1664 44,-27 44,-88 9,-123l-264 -264c-26,-36 -71,-36 -115,8 -501,528 -757,1347 -572,2183 9,44 44,71 88,53l0 0zm4516 203l-361 -132c-17,0 -70,0 -97,61 -290,705 -977,1189 -1769,1189 -792,0 -1496,-493 -1778,-1198 -18,-52 -71,-52 -88,-52l-361 132c-44,9 -62,44 -44,97 361,906 1241,1549 2271,1549 1030,0 1910,-652 2271,-1558 18,-44 0,-79 -44,-88l0 0 0 0zm-422 -2447c-36,-44 -88,-36 -106,0l-264 264c-44,35 -35,96 0,123 396,440 563,986 440,1664 -9,44 18,79 53,88l370 105c44,18 79,-9 88,-53 184,-836 -71,-1655 -581,-2191l0 0 0 0zm-845 -97l88 -159 220 -105c-18,-18 -44,-27 -71,-44l-158 70 -27 -167c-35,-18 -52,-27 -88,-35l44 246 -79 158 71 36 0 0zm-423 3662c-114,26 -202,44 -308,61l9 62c35,0 79,-9 123,-18l53 317 88 -17 -71 -309c44,-8 80,-26 124,-35l-18 -61zm-1109 52l0 18c-9,53 -44,106 -97,115l9 184c-27,-8 -53,-17 -79,-26l0 -176 -80 -26 -61 149c-27,-9 -53,-17 -79,-35l79 -176 9 -27 70 -149 167 70c44,9 62,44 62,79l0 0zm-71 0c0,-8 -8,-17 -17,-26l-97 -35 -26 61 -9 27 0 0 88 35c26,9 53,-18 61,-35 0,-9 0,-18 0,-27l0 0 0 0zm1180 -3890c-35,-9 -53,-18 -88,-27l62 -211 44 -150c70,9 132,36 193,53 36,9 53,53 62,97 0,62 -26,123 -88,132l17 176c-26,-9 -44,-18 -79,-35l-17 -150 -71 -17 -35 132 0 0zm53 -203l88 27c17,8 53,-27 53,-62 0,-18 -9,-26 -27,-35 -35,-9 -53,-18 -88,-27l-17 62 -9 35 0 0zm-423 4278l80 203c-27,0 -53,9 -71,9l-26 -71 -168 9 -26 70c-26,-8 -44,-8 -70,-8l70 -212 53 -167 0 0 88 -9 0 18 70 158 0 0zm-53 71l-26 -71 -35 -79 -27 79 -26 80 114 -9 0 0zm511 -344l132 370c27,-9 53,-17 79,-26l-123 -370c-35,18 -53,18 -88,26l0 0 0 0zm-1857 -3855l-18 -44c53,-35 114,-62 167,-97 71,-35 168,53 168,141 -9,9 -9,26 -18,35l141 106c-27,8 -44,17 -79,35l-124 -88 -70 35 79 123c-35,18 -53,27 -79,44l-167 -290 0 0zm88 -27l8 27 36 61 79 -44c9,0 18,-8 18,-17 0,-44 -27,-88 -62,-71 -35,18 -53,27 -79,44z"/>
                <circle style="fill:rgb(255,255,255)" cx="52" cy="48.5" r="18"/>`;
    } else if (customization == '8') {
        eye = `<path transform="translate(25,25) scale(0.5)" style="fill:rgb(255,255,255)" d="M100.106,9.15c-1.488,0.196-1.372-3.001-1.583-5.262l-1.567,0.406c1.156-0.47-0.028-1.336-1.721-1.639
		c-4.87-0.563-3.902,3.094-7.679,1.2c0.549,0.04,0.64-0.193,1.197-0.155l-1.942-0.833c-0.41,3.951-11.443-2.518-11.86,1.438
		c-2.773-1.596-0.195-0.952,3.361-2.82l-5.088,0.367c0.063,0.04-1.837,0.418-0.761,0.095c-3.868-1.666-1.126,0.345-3.219,1.378
		c-1.481-0.571,1.156-2.969-3.05-2.317c-5.944,0.772,1.129,2.886-2.443,3.352l-2.585-2.048c-4.559,1.565-7.969,0.115-11.815-0.144
		c-0.872,0.164-1.296,0.376-1.51,0.598c-4.091-0.887-8.58,2.001-11.662,1.329c0.719-0.421-1.765-0.317-2.138-0.813l-5.567,1.267
		c2.459-0.537,2.354-1.715,2.806-2.858c-1.744,0.121-2.559,0.767-3.744,0.918c0.722-0.415,1.452-0.838,0.532-1.366L22.226,3.19
		c0.339,0.2,1.014,0.276,1.574,0.328c-1.459,0.013-4.617,0.754-6.708-0.206c0.185-0.452,0.903-0.875,1.084-1.334
		c1.753,1.294,2.752,0.191,3.662-0.688c-4.033,0.201-1.005-0.3-2.944-1.135c-2.845,0.045-4.015,2.909-3.266,3.899
		c-3.211-0.449-4.231-1.187-7.516,0l0.625-2.473L5.723,1.145l2.444-1.008c-5.443-1.025-1.585,4.044-6.47,3.891
		C1.504,6.28,1.585,9.342,0.127,9.15c0.091,1.272,0.079,2.428-0.01,3.372c0.576,0.548,1.083,0.542,1.274-2.258l1.301,4.665
		C7.967,17.518,2.25,27.36,3.949,34.425c-0.203-0.499-0.486-0.628-0.649-0.689c1.689,6.275-1.423,14.073-0.581,15.53L1.27,49.825
		c2.225,5.367,2.414,6.002,1.514,12.402c-0.233-0.081-0.651-0.821-0.954,0.19c1.071,1.537,2.141,3.086,1.845,7.469L3.22,69.703
		l0.238,6.856c-4.464-0.051,2.732,11.738-2.11,13.803c0.883,0.906,1.356,3.498,1.763,5.77c2.66,0.833,0.273,4.632,5.056,3.731
		l-2.444-1.009l3.014-0.436l-0.625-2.473c3.285,1.187,4.305,0.448,7.516,0c-0.749,0.99,0.421,3.854,3.266,3.899
		c1.939-0.836-1.089-1.337,2.944-1.136c-0.91-0.879-1.909-1.982-3.662-0.688c-0.181-0.458-0.899-0.882-1.084-1.334
		c2.091-0.96,5.249-0.218,6.708-0.206c-0.56,0.053-1.235,0.129-1.574,0.329l5.843,1.947c0.919-0.528,0.19-0.952-0.532-1.367
		c1.185,0.151,2,0.797,3.744,0.918c-0.452-1.143-0.347-2.32-2.806-2.857l5.567,1.267c0.373-0.496,2.857-0.393,2.138-0.813
		c3.083-0.672,7.571,2.216,11.662,1.329c0.214,0.223,0.639,0.435,1.51,0.599c3.847-0.259,7.257-1.709,11.815-0.144l2.585-2.049
		c3.572,0.466-3.501,2.581,2.443,3.353c4.206,0.652,1.568-1.746,3.05-2.316c2.093,1.032-0.649,3.044,3.219,1.377
		c-1.076-0.323,0.824,0.056,0.761,0.096l5.088,0.367c-3.557-1.869-6.135-1.225-3.361-2.82c0.417,3.955,11.45-2.514,11.86,1.438
		l1.942-0.833c-0.558,0.038-0.648-0.195-1.197-0.155c3.776-1.894,2.809,1.764,7.679,1.2c0.757-0.135,1.397-0.385,1.788-0.661
		c0.05-0.275,0.1-0.561,0.152-0.849c-0.065-0.044-0.123-0.09-0.22-0.129l0.231,0.06c0.394-2.178,0.862-4.546,1.697-5.403
		c-4.842-2.064,2.354-13.854-2.109-13.803l0.238-6.856l-0.455,0.183c-0.296-4.383,0.774-5.932,1.845-7.469
		c-0.303-1.012-0.721-0.271-0.953-0.19c-0.9-6.399-0.711-7.035,1.515-12.402l-1.449-0.559c0.841-1.457-2.271-9.255-0.582-15.53
		c-0.163,0.061-0.446,0.19-0.648,0.689c1.699-7.065-4.02-16.908,1.256-19.497l1.301-4.665c0.189,2.801,0.696,2.806,1.275,2.257
		C100.027,11.578,100.015,10.422,100.106,9.15z"/>`
    } else if (customization == '7') {
        eye = `<polygon transform="translate(25,25) scale(0.5)" style="fill:rgb(255,255,255)" points="96.309,94.77 100,88.374 96.309,81.979 100,75.583 96.309,69.188 100,62.791 96.309,56.396 100,50 96.309,43.604 
		100,37.208 96.309,30.813 100,24.418 96.309,18.023 100,11.627 96.309,5.231 98.409,1.59 94.77,3.693 88.374,0 81.979,3.693 
		75.583,0 69.188,3.693 62.791,0 56.396,3.693 50,0 43.604,3.693 37.208,0 30.813,3.693 24.418,0 18.023,3.693 11.627,0 
		5.231,3.693 1.591,1.591 3.693,5.231 0,11.627 3.693,18.023 0,24.418 3.693,30.813 0,37.208 3.693,43.604 0,50 3.693,56.396 
		0,62.791 3.693,69.188 0,75.583 3.693,81.979 0,88.374 3.693,94.77 1.59,98.409 5.231,96.309 11.627,100 18.023,96.309 24.418,100 
		30.813,96.309 37.208,100 43.604,96.309 50,100 56.396,96.309 62.791,100 69.188,96.309 75.583,100 81.979,96.309 88.374,100 
		94.77,96.309 98.409,98.409 	"/>`
    } else if (customization == '6') {
        eye = `<path transform="translate(25,25) scale(0.5)" style="fill:rgb(255,255,255)" d="M27.351,100c-15.09,0-27.365-12.032-27.365-26.808V26.794c0-4.616,1.2-8.96,3.301-12.761 c2.029-3.658,4.901-6.802,8.36-9.174C16.09,1.801,21.506,0,27.336,0h45.327c15.076,0,27.351,12.018,27.351,26.793v46.398 c0,14.775-12.274,26.808-27.351,26.808H50H27.351z"/>`
    } else if (customization == '5') {
        eye = `<path style="fill:rgb(255,255,255)"  transform="translate(75,25) scale(-0.5 0.5)" d="M21.468,99.999c-6.65,0-12.966-6.875-13.959-13.225L0.003-0.001L88.13,5.638c6.21,0.93,11.099,6.823,11.105,13.866 l0.762,80.495H21.468z"/>`
    } else if (customization == '4') {
        eye = `<path  transform="translate(75,75) scale(-0.5)" style="fill:rgb(255,255,255);"  d="M100.061,99.984V0h-100l0.028,72.369C0.088,87.602,12.27,100,27.226,100h45.528c4.682,0,11.508,0,17.171-0.016C95.574,99.984,100.061,99.984,100.061,99.984z"/>`
    } else if (customization == '3') {
        eye = `<path transform="translate(25,25) scale(0.5)" style="fill:rgb(255,255,255);" d="M72.744-0.021H27.23c-2.341,0-4.612,0.297-6.771,0.875C15.679,2.11,11.418,4.648,8.04,8.09 c-0.617,0.621-1.206,1.284-1.752,1.96c-3.883,4.767-6.21,10.903-6.21,17.561L0.05,99.979h72.694 c14.971,0,27.138-12.397,27.138-27.63V27.625v-0.014l0.168-27.617C100.05-0.006,82.107-0.021,72.744-0.021z"/>`
    } else if (customization == '2') {
        eye = `<path transform="translate(25,25) scale(0.5)" style="fill:rgb(255,255,255);" d="M100,72.779V27.195C100,12.203,87.604,0,72.37,0H27.63C12.397,0,0,12.203,0,27.195V100l72.37-0.042 C87.604,99.958,100,87.771,100,72.779z"/>`
    } else if (customization == '1') {
        eye = `<circle style="fill:rgb(255,255,255)" cx="50" cy="50" r="25"/>`;
    } else {
        eye = `<rect style="fill:rgb(255,255,255)" x="25" y="25" width="50" height="50"/>`;
    }
    return `<g transform="translate(42,0) scale(-0.4204,0.4204)">${eye}</g>
            <g transform="translate(42,${((x-7)*6)+42}) scale(-0.4204,-0.4204)">${eye}</g>
            <g transform="translate(${(x-7)*6},0) scale(0.4204)">${eye}</g>`
}

function geteyeframe(x, customization) {
    let eye_path = '';
    if (customization == 8) {
        eye_path = `<path style="rgb(255,255,255)" d="M1.377,48.462l-1.011-1.131C0.371,49.104,0.881,48.324,1.377,48.462z"/>
        <path style="fill:rgb(255,255,255)" d="M1.576,48.569c-0.065-0.059-0.133-0.087-0.199-0.106l0.188,0.211L1.576,48.569z"/>
        <path style="fill:rgb(255,255,255)" d="M99.868,47.332l-1.013,1.131C99.354,48.324,99.863,49.104,99.868,47.332z"/>
        <path style="fill:rgb(255,255,255)" d="M99.454,79.01c0.032,0.427-0.151,0.498-0.122,0.933l-0.655-1.514c3.106-0.32-1.979-8.914,1.132-9.24
            c-1.256-2.16-0.75-0.15-2.218,2.619l0.288-3.964c0.031,0.054,0.33-1.432,0.076-0.593c-1.311-3.014,0.271-0.877,1.081-2.507
            c-0.447-1.154-2.333,0.899-1.82-2.376c0.607-4.633,2.271,0.879,2.636-1.903l-1.609-2.015c1.23-3.553,0.091-6.207-0.112-9.206
            c0.128-0.679,0.295-1.009,0.47-1.175c-0.697-3.188,1.572-6.685,1.045-9.086c-0.33,0.56-0.25-1.376-0.64-1.666L100,32.98
            c-0.423,1.917-1.35,1.833-2.246,2.185c0.094-1.357,0.602-1.993,0.721-2.916c-0.324,0.562-0.658,1.132-1.072,0.416l1.529-4.553
            c0.157,0.265,0.217,0.79,0.258,1.227c0.011-1.137,0.593-3.597-0.162-5.228c-0.355,0.145-0.688,0.705-1.047,0.844
            c1.016,1.368,0.149,2.146-0.543,2.854c0.158-3.145-0.234-0.783-0.892-2.294c0.035-2.216,2.286-3.127,3.063-2.543
            c-0.352-2.502-0.933-3.298,0-5.855l-1.942,0.486l-0.344-2.348l-0.792,1.905c-0.303-1.592,0.074-2.156,0.652-2.449
            c1.058-0.535,2.795-0.146,2.336-3.38l-1.104-0.017c0.424-1.922,0.93-2.583-0.395-4.079c0.668-1.869,1.56,3.193,1.785-1.198
            c-0.57-0.773-0.986-2.439-1.209-3.699c0.439-1.232,1.114,0.52,1.17,1.574c0.08-1.555-0.123-2.571-0.447-3.314
            c-0.612-0.021-1.194-0.125-1.705-0.381c0.648,0.594,1.294,1.188-0.199,1.636c-2.292,0.212-6.193-2.248-8.262-0.374
            c-0.293-0.162-0.399-0.318-0.411-0.466c-0.478,0.131-1.116,0.251-1.813,0.375c-1.869,0.333-4.166,0.704-4.931,1.444
            c-1.623-3.771-10.89,1.835-10.849-1.644l-5.389,0.186l0.143-0.354c-3.443-0.23-4.66,0.604-5.869,1.438
            c-0.795-0.237-0.213-0.562-0.148-0.743c-5.029-0.702-5.529-0.555-9.748,1.179L49.7,1.766c-1.145,0.656-7.273-1.77-12.205-0.453
            c0.048-0.127,0.15-0.347,0.541-0.506c-5.553,1.324-13.288-3.13-15.322,0.979L19.048,2.8c2.2,0.148,2.205,0.543,1.774,0.992
            c-0.742-0.069-1.65-0.079-2.65-0.008c0.18-1.349-3.26-1.003-4.931-1.342c-0.548-0.111-0.909-0.294-0.88-0.64
            C8.14-0.334,4.094,0.238,0.234,0C0.08,0.642,0.412,2.861,0.466,3.913C0.521,2.859,0.787-0.31,1.229,0.922
            c-0.223,1.26-0.231,4.343-0.803,5.116c0.227,4.391,1.118-0.671,1.785,1.198c-1.323,1.495-0.817,2.157-0.394,4.079l-1.104,0.017
            c-0.229,1.617,0.095,2.322,0.605,2.694c1.068,0.779,2.963,0.086,2.384,3.135L2.91,15.256l-0.344,2.348l-1.943-0.486
            c0.933,2.558,0.353,3.353,0,5.855c0.778-0.583,3.029,0.328,3.064,2.543c-0.656,1.511-1.05-0.849-0.892,2.294
            c-0.691-0.709-1.558-1.488-0.541-2.854c-0.36-0.14-0.692-0.7-1.049-0.844c-0.754,1.631-0.172,4.091-0.161,5.228
            c0.041-0.437,0.101-0.961,0.258-1.227l1.53,4.553c-0.415,0.716-0.748,0.147-1.074-0.416c0.119,0.923,0.627,1.559,0.722,2.916
            c-0.897-0.352-1.824-0.269-2.246-2.185l0.995,4.337c-0.39,0.29-0.308,2.225-0.639,1.666c-0.528,2.401,1.741,5.897,1.045,9.086
            c0.174,0.167,0.341,0.497,0.47,1.175c-0.203,2.999-1.343,5.653-0.113,9.206l-1.609,2.015c0.366,2.782,2.028-2.729,2.635,1.903
            c0.513,3.275-1.373,1.222-1.82,2.376c0.811,1.63,2.392-0.507,1.082,2.507c-0.254-0.838,0.044,0.645,0.075,0.593l0.288,3.964
            c-1.469-2.771-0.962-4.779-2.217-2.619c3.109,0.326-1.976,8.92,1.131,9.24l-0.655,1.514c0.03-0.435-0.153-0.506-0.122-0.933
            c-1.488,2.941,1.387,2.188,0.943,5.981c-0.063,0.355-0.162,0.68-0.276,0.949c-0.309,0.729-0.742,1.049-1.011,0.392l0.769,2.946
            c-0.05,0.709-0.428,0.677-0.521,0.158l0.228,4.125L0.82,93.526c0.488,0.641,0.551,1.193,0.871,1.906
            c-0.446,1.141-0.33-0.574-0.718-0.281L0,99.84c3.287-0.188,8.975-0.63,12.329-0.591c-0.029-0.342,0.356-1.573,0.892-1.686
            c0.29-0.062,0.633-0.102,1.006-0.131c0.068-0.007,0.137-0.013,0.207-0.018c1.732-0.124,3.882-0.125,3.738-1.199
            c1,0.071,1.908,0.061,2.65-0.008c0.431,0.449,0.426,0.845-1.774,0.992l3.666,1.014c2.034,4.11,9.77-0.345,15.322,0.979
            c-0.391-0.158-0.493-0.379-0.541-0.506c4.932,1.317,11.061-1.108,12.205-0.453l0.438-1.129c4.217,1.734,4.717,1.881,9.747,1.18
            c-0.062-0.182-0.646-0.506,0.149-0.743c1.209,0.835,2.426,1.669,5.87,1.438l-0.144-0.354l5.388,0.186
            c-0.039-3.479,9.227,2.128,10.85-1.645c0.646,0.627,2.396,0.988,4.052,1.287c1.028,0.186,2.021,0.348,2.692,0.531
            c0.012-0.146,0.117-0.303,0.412-0.465c2.066,1.874,5.969-0.586,8.261-0.375c0.188,0.057,0.341,0.115,0.465,0.176l0.688-2.271
            c-0.389-0.292-0.272,1.422-0.719,0.281c0.321-0.712,1.074-2.165,1.562-2.807L99.32,93.56l0.228-4.123
            c-0.092,0.518-0.47,0.551-0.521-0.16l0.769-2.945c-0.354,0.865-0.993,0.041-1.254-1.196c-0.011-0.049-0.024-0.094-0.033-0.145
            C98.066,81.196,100.941,81.951,99.454,79.01z M88.273,18.933l-1.02,3.647c-4.131,2.024,0.348,9.72-0.982,15.244
            c0.158-0.39,0.379-0.491,0.508-0.539c-1.323,4.906,1.113,11.003,0.455,12.142l1.136,0.437c-1.743,4.196-1.892,4.694-1.187,9.698
            c0.183-0.063,0.51-0.644,0.746,0.147c-0.839,1.202-1.677,2.413-1.445,5.84l0.356-0.144l-0.187,5.361
            c3.496-0.041-2.141,9.178,1.652,10.791c-0.654,0.67-1.021,2.521-1.33,4.226l-0.182-0.048c0.076,0.031,0.121,0.066,0.172,0.102
            c-0.041,0.227-0.08,0.448-0.119,0.664c-0.306,0.216-0.808,0.411-1.399,0.518c-3.813,0.439-3.056-2.42-6.013-0.938
            c0.43-0.031,0.5,0.151,0.938,0.121l-1.521,0.651c-0.32-3.09-8.961,1.969-9.287-1.125c-2.172,1.248-0.152,0.744,2.633,2.205
            l-3.984-0.287c0.051-0.031-1.438-0.326-0.596-0.074c-3.029,1.304-0.883-0.27-2.521-1.076c-1.16,0.445,0.905,2.32-2.389,1.812
            c-4.655-0.604,0.884-2.258-1.913-2.621l-2.024,1.602c-3.569-1.225-6.24-0.09-9.252,0.111c-0.683-0.127-1.015-0.293-1.183-0.467
            c-3.204,0.692-6.719-1.564-9.133-1.039c0.563,0.328-1.382,0.248-1.674,0.635l-4.359-0.989c1.926,0.42,1.844,1.341,2.197,2.233
            c-1.365-0.095-2.004-0.6-2.932-0.717c0.565,0.323,1.137,0.654,0.417,1.067l-4.576-1.522c0.266-0.156,0.794-0.216,1.232-0.257
            c-1.143-0.01-3.615-0.59-5.253,0.161c0.145,0.354,0.707,0.686,0.849,1.043c1.373-1.012,2.155-0.148,2.868,0.538
            c-3.158-0.157-0.787,0.233-2.306,0.888c-2.228-0.035-3.144-2.273-2.558-3.049c-2.515,0.352-3.313,0.928-5.886,0l0.489,1.934
            l-2.36,0.342l1.914,0.787c-3.745,0.705-1.876-2.266-3.959-2.916c-0.318-1.776-0.689-3.803-1.381-4.512
            c3.792-1.613-1.844-10.832,1.652-10.791l-0.187-5.36l0.356,0.143c0.231-3.427-0.606-4.638-1.445-5.84
            c0.237-0.791,0.564-0.212,0.747-0.147c0.705-5.004,0.557-5.502-1.186-9.698l1.135-0.438c-0.659-1.139,1.778-7.236,0.455-12.142
            c0.128,0.047,0.35,0.149,0.509,0.539c-1.331-5.523,3.146-13.22-0.984-15.244l-1.019-3.647c-0.149,2.189-0.547,2.194-0.998,1.765
            c0.069-0.738,0.079-1.642,0.008-2.636c1.142,0.15,1.078-2.244,1.229-4.004c3.825,0.12,0.804-3.844,5.066-3.042l-1.914,0.788
            l2.36,0.341l-0.489,1.934c2.572-0.928,3.371-0.351,5.886,0c-0.586-0.774,0.33-3.014,2.558-3.049
            c1.519,0.653-0.853,1.045,2.306,0.888c-0.713,0.688-1.495,1.55-2.868,0.538c-0.142,0.358-0.704,0.689-0.849,1.043
            c1.638,0.751,4.11,0.171,5.253,0.161c-0.438-0.041-0.967-0.101-1.232-0.257l4.576-1.522c0.72,0.413,0.148,0.744-0.417,1.068
            c0.928-0.118,1.566-0.623,2.932-0.718c-0.354,0.894-0.271,1.814-2.197,2.234l4.359-0.99c0.292,0.388,2.237,0.307,1.674,0.636
            c2.414,0.525,5.929-1.732,9.133-1.039c0.168-0.174,0.5-0.34,1.183-0.468c3.012,0.202,5.683,1.336,9.252,0.112l2.024,1.602
            c2.797-0.364-2.742-2.018,1.913-2.621c3.294-0.51,1.229,1.365,2.389,1.812c1.639-0.808-0.509-2.38,2.521-1.077
            c-0.844,0.252,0.646-0.043,0.596-0.074l3.984-0.287c-2.785,1.461-4.805,0.957-2.633,2.205c0.326-3.093,8.967,1.965,9.287-1.124
            l1.521,0.651c-0.438-0.03-0.508,0.152-0.938,0.121c2.957,1.48,2.198-1.379,6.012-0.938c1.326,0.236,2.254,0.914,1.349,1.281
            l1.228-0.317c0.166,1.768,0.074,4.268,1.24,4.114c-0.072,0.995-0.062,1.898,0.008,2.636C88.818,21.126,88.422,21.123,88.273,18.933
            z"/>
        <path style="fill:rgb(255,255,255)" d="M98.669,48.674l0.188-0.211c-0.066,0.02-0.133,0.047-0.199,0.106L98.669,48.674z"/>
        <path style="fill:rgb(255,255,255)" d="M89.245,98.929c-0.021,0.219,0.239,0.422,0.831,0.601C90.205,99.286,89.857,99.099,89.245,98.929z"/>`
    } else if (customization == 7) {
        eye_path = `<path style="fill:rgb(255,255,255)" d="M97.623,2.377L96.25,0h-7.5l-1.229,2.127L83.837,0l-4.833,2.791L74.17,0l-4.834,2.791L64.502,0l-4.834,2.791L54.834,0
		L50,2.791L45.166,0l-4.834,2.791L35.498,0l-4.833,2.791L25.831,0l-4.834,2.791L16.163,0l-3.685,2.127L11.25,0h-7.5L2.377,2.377
		L0,3.75v7.5l2.127,1.228L0,16.163l2.791,4.834L0,25.831l2.791,4.833L0,35.498l2.791,4.834L0,45.166L2.791,50L0,54.834l2.791,4.834
		L0,64.502l2.791,4.834L0,74.17l2.791,4.834L0,83.837l2.127,3.685L0,88.75v7.5l2.377,1.373L3.75,100h7.5l1.228-2.127L16.163,100
		l4.834-2.791L25.831,100l4.833-2.791L35.498,100l4.834-2.791L45.166,100L50,97.209L54.834,100l4.834-2.791L64.502,100l4.834-2.791
		L74.17,100l4.834-2.791L83.837,100l3.685-2.127L88.75,100h7.5l1.373-2.377L100,96.25v-7.5l-2.127-1.229L100,83.837l-2.791-4.833
		L100,74.17l-2.791-4.834L100,64.502l-2.791-4.834L100,54.834L97.209,50L100,45.166l-2.791-4.834L100,35.498l-2.791-4.833
		L100,25.831l-2.791-4.834L100,16.163l-2.127-3.685L100,11.25v-7.5L97.623,2.377z M79.004,87.791L74.17,85l-4.834,2.791L64.502,85
		l-4.834,2.791L54.834,85L50,87.791L45.166,85l-4.834,2.791L35.498,85l-4.833,2.791L25.831,85l-4.834,2.791L16.163,85l-2.751,1.589
		L15,83.837l-2.791-4.833L15,74.17l-2.791-4.834L15,64.502l-2.791-4.834L15,54.834L12.209,50L15,45.166l-2.791-4.834L15,35.498
		l-2.791-4.833L15,25.831l-2.791-4.834L15,16.163l-1.588-2.751L16.163,15l4.834-2.791L25.831,15l4.833-2.791L35.498,15l4.834-2.791
		L45.166,15L50,12.209L54.834,15l4.834-2.791L64.502,15l4.834-2.791L74.17,15l4.834-2.791L83.837,15l2.752-1.589L85,16.163
		l2.791,4.834L85,25.831l2.791,4.833L85,35.498l2.791,4.834L85,45.166L87.791,50L85,54.834l2.791,4.834L85,64.502l2.791,4.834
		L85,74.17l2.791,4.834L85,83.837l1.589,2.752L83.837,85L79.004,87.791z"/>`
    } else if (customization == 6) {
        eye_path = `<path style="fill:none;" d="M65.859,15.008H34.141c-4.082,0-7.869,1.258-10.979,3.398c-2.419,1.665-4.428,3.864-5.848,6.421
		            C15.838,27.484,15,30.526,15,33.758v32.471c0,10.344,8.586,18.76,19.145,18.76L50,84.992l15.855-0.004
		            C76.414,84.988,85,76.572,85,66.229V33.758C85,23.419,76.414,15.008,65.859,15.008z"/>
	                <path fill="rgb(255,255,255)" d="M65.859,0.008H34.141h0C18.683,0.008,5.587,10.221,1.4,24.18c-0.433,1.444-0.771,2.928-1.006,4.445
		            C0.135,30.299,0,32.013,0,33.758v32.471c0,18.619,15.32,33.76,34.141,33.76L50,99.992l15.859-0.004
		            c18.82,0,34.141-15.141,34.141-33.76V33.758C100,15.148,84.68,0.008,65.859,0.008z M85,66.229c0,10.344-8.586,18.76-19.145,18.76
		            L50,84.992l-15.855-0.004C23.586,84.988,15,76.572,15,66.229V33.758c0-3.231,0.838-6.273,2.313-8.931
		            c1.42-2.557,3.429-4.756,5.848-6.421c3.11-2.141,6.897-3.398,10.979-3.398h31.719C76.414,15.008,85,23.419,85,33.758V66.229z"/>`
    } else if (customization == 5) {
        eye_path = `<path fill="rgb(255,255,255)" transform="translate(100 0) scale(-1 1)" d="M21.475,99.992c-6.648,0-12.964-6.852-13.958-13.207L0.011-0.008l88.112,5.649c6.212,0.931,11.096,6.804,11.104,13.848
                    l0.762,80.503H21.475z M85.706,85.71l-0.544-57.492c-0.005-5.029-3.495-9.233-7.931-9.898l-62.938-4.03l5.36,61.98
                    c0.71,4.536,5.222,9.44,9.971,9.44H85.706z"/>`
    } else if (customization == 4) {
        eye_path = `<path style="fill:none;"  d="M33.78,85H85V15H15.004l0.016,50.855C15.02,76.414,23.436,85,33.78,85z"/>
                    <path fill="rgb(255,255,255)" transform="translate(100 100) scale(-1 -1)" d="M100,100V65.859V34.141C100,25.65,100,0,100,0S76.46,0,66.25,0H0l0.02,65.859C0.02,84.68,15.16,100,33.78,100h32.47H100z
                    M85,85H33.78c-10.344,0-18.76-8.586-18.76-19.145L15.004,15H85V85z"/>`
    } else if (customization == '3') {
        eye_path = `<path fill="none" d="M15.02,34.145L15.004,85H66.25C76.589,85,85,76.414,85,65.86V15H33.78C23.436,15,15.02,23.586,15.02,34.145z"/>
	                <path fill="rgb(255,255,255)" d="M66.25,0H33.78C15.16,0,0.02,15.32,0.02,34.14L0,100h66.25C84.86,100,100,84.68,100,65.86V34.14V0H66.25z M85,65.86
		            C85,76.414,76.589,85,66.25,85H15.004l0.016-50.855C15.02,23.586,23.436,15,33.78,15H85V65.86z"/>`;
    } else if (customization == '2') {
        eye_path = `<path style="fill:none;" d="M85,66.221V33.75C85,23.411,76.414,15,65.859,15H34.14C23.586,15,15,23.411,15,33.75v51.246
		        l50.855-0.016C76.414,84.98,85,76.564,85,66.221z"/>
                <path  style="fill:rgb(255,255,255);" d="M100,66.221V33.75C100,15.141,84.68,0,65.859,0H34.14C15.32,0,0,15.141,0,33.75V100l65.859-0.02
	            C84.68,99.98,100,84.84,100,66.221z M85,66.221c0,10.344-8.586,18.76-19.145,18.76L15,84.996V33.75C15,23.411,23.586,15,34.14,15
                h31.719C76.414,15,85,23.411,85,33.75V66.221z"/>`;
    } else if (customization == '1') {
        eye_path = `<path style="fill:rgb(255,255,255)" d="M100,21.667c0-3.284-2.113-6.068-5.053-7.083C97.887,13.567,100,10.784,100,7.5c0-4.144-3.357-7.5-7.5-7.5
		c-3.284,0-6.066,2.112-7.083,5.051C84.4,2.112,81.618,0,78.334,0c-3.285,0-6.068,2.114-7.084,5.054C70.234,2.114,67.451,0,64.166,0
		c-3.284,0-6.066,2.112-7.083,5.051C56.066,2.112,53.284,0,50,0s-6.068,2.112-7.083,5.052C41.9,2.112,39.117,0,35.833,0
		s-6.067,2.112-7.083,5.051C27.734,2.112,24.951,0,21.667,0s-6.068,2.114-7.083,5.053C13.568,2.114,10.784,0,7.5,0
		C3.357,0,0,3.356,0,7.5c0,3.284,2.114,6.067,5.053,7.083C2.114,15.599,0,18.383,0,21.667s2.113,6.066,5.051,7.083
		C2.113,29.766,0,32.549,0,35.833s2.113,6.066,5.052,7.083C2.113,43.932,0,46.715,0,50s2.113,6.068,5.051,7.082
		C2.113,58.1,0,60.881,0,64.166s2.114,6.068,5.054,7.084C2.114,72.266,0,75.049,0,78.334c0,3.283,2.113,6.066,5.051,7.082
		C2.113,86.434,0,89.215,0,92.5c0,4.143,3.357,7.5,7.5,7.5c0.518,0,1.023-0.053,1.512-0.152c2.608-0.533,4.716-2.426,5.572-4.898
		c1.015,2.938,3.799,5.051,7.083,5.051s6.067-2.111,7.083-5.051c1.016,2.938,3.799,5.051,7.083,5.051s6.067-2.111,7.083-5.051
		C43.932,97.887,46.715,100,50,100s6.068-2.113,7.083-5.053C58.1,97.885,60.882,100,64.166,100c3.285,0,6.068-2.115,7.084-5.055
		c1.016,2.939,3.799,5.055,7.084,5.055c3.284,0,6.066-2.113,7.083-5.053C86.434,97.887,89.216,100,92.5,100
		c4.143,0,7.5-3.357,7.5-7.5c0-3.285-2.113-6.066-5.052-7.084C97.887,84.4,100,81.617,100,78.334c0-3.285-2.113-6.068-5.055-7.084
		c2.939-1.016,5.055-3.799,5.055-7.084s-2.113-6.066-5.052-7.084C97.887,56.066,100,53.283,100,50c0-3.284-2.113-6.068-5.052-7.083
		c2.938-1.018,5.052-3.8,5.052-7.084s-2.113-6.067-5.052-7.083C97.887,27.733,100,24.951,100,21.667z M90.052,85.416
		c-2.17,0.75-3.885,2.465-4.635,4.635C84.4,87.113,81.618,85,78.334,85c-3.285,0-6.068,2.113-7.084,5.055
		C70.234,87.113,67.451,85,64.166,85c-3.284,0-6.066,2.113-7.083,5.051C56.066,87.113,53.284,85,50,85s-6.068,2.113-7.083,5.051
		C41.9,87.113,39.117,85,35.833,85s-6.067,2.113-7.083,5.051C27.734,87.113,24.951,85,21.667,85s-6.068,2.113-7.083,5.051
		c-0.75-2.17-2.465-3.885-4.635-4.635C12.887,84.4,15,81.617,15,78.334c0-3.285-2.115-6.068-5.055-7.084
		C12.886,70.234,15,67.451,15,64.166s-2.114-6.066-5.052-7.084C12.887,56.066,15,53.283,15,50c0-3.284-2.113-6.068-5.052-7.083
		c2.939-1.018,5.052-3.8,5.052-7.084s-2.113-6.067-5.051-7.083C12.887,27.733,15,24.951,15,21.667s-2.114-6.068-5.053-7.083
		c2.171-0.75,3.886-2.465,4.636-4.636c1.016,2.938,3.8,5.052,7.084,5.052s6.067-2.113,7.083-5.051
		C29.766,12.887,32.549,15,35.833,15s6.067-2.113,7.083-5.052C43.932,12.887,46.715,15,50,15s6.068-2.113,7.083-5.051
		C58.1,12.887,60.882,15,64.166,15c3.285,0,6.068-2.114,7.084-5.055C72.266,12.886,75.049,15,78.334,15
		c3.284,0,6.066-2.113,7.083-5.051c0.75,2.17,2.465,3.885,4.636,4.635C87.113,15.599,85,18.383,85,21.667s2.113,6.066,5.052,7.083
		C87.113,29.766,85,32.549,85,35.833s2.113,6.066,5.052,7.083C87.113,43.932,85,46.715,85,50s2.113,6.068,5.052,7.082
		C87.113,58.1,85,60.881,85,64.166s2.113,6.068,5.055,7.084C87.113,72.266,85,75.049,85,78.334C85,81.617,87.113,84.4,90.052,85.416
		z"/>`
    } else {
        eye_path = `<path style="fill:rgb(255,255,255);" d="M85,0H15H0v15v70v15h15h70h15V85V15V0H85z M85,85H15V15h70V85z"/>`
    }
    return `<g transform="translate(42,0) scale(-0.4204,0.4204)">${eye_path}</g>
                <g transform="translate(42,${((x-7)*6)+42}) scale(-0.4204,-0.4204)">${eye_path}</g>
                <g transform="translate(${(x-7)*6},0) scale(0.4204)">${eye_path}</g>`
}

var setcolors = function(x, options) {
    let a = '';
    if (options.fill == "linear-horizontal") {
        a = `</g></mask> <linearGradient gradientTransform="rotate(0)" id="grad">
                <stop offset="0%" stop-color="${(options.color.indexOf('.')!==-1)? options.color.split('.')[0] : 'rgba(0,0,0,1)'}" />
                <stop offset="100%" stop-color="${(options.color.indexOf('.')!==-1)? options.color.split('.')[1] : 'rgba(2,119,189,1)'}" />
            </linearGradient></defs></g><rect x="0" y="0" width="${x}" height="${x}" fill="url(#grad)" mask="url(#gmask)" /></g></svg>`;
    } else if (options.fill == "linear-vertical") {
        a = `</g></mask> <linearGradient gradientTransform="rotate(90)" id="grad">
                <stop offset="0%" stop-color="${(options.color.indexOf('.')!==-1)? options.color.split('.')[0] : 'rgba(0,0,0,1)'}" />
                <stop offset="100%" stop-color="${(options.color.indexOf('.')!==-1)? options.color.split('.')[1] : 'rgba(2,119,189,1)'}" />
            </linearGradient></defs></g><rect x="0" y="0" width="${x}" height="${x}" fill="url(#grad)" mask="url(#gmask)" /></g></svg>`;
    } else if (options.fill == "radial") {
        a = `</g></mask>
            <radialGradient id="grad">
                <stop offset="0%" style="stop-color:${(options.color.indexOf('.')!==-1)? options.color.split('.')[0] : 'rgba(0,0,0,1)'};" />
                <stop offset="100%" style="stop-color:${(options.color.indexOf('.')!==-1)? options.color.split('.')[1] : 'rgba(2,119,189,1)'};" />
            </radialGradient>
            </defs></g><rect x="0" y="0" width="${x}" height="${x}" fill="url(#grad)" mask="url(#gmask)" /></g></svg>`;
    } else {
        a = `</g></mask></defs></g><rect x="0" y="0" width="${x}" height="${x}" fill="${options.color}" mask="url(#gmask)" /></g></svg>`;
    }
    return a;
}
module.exports = {
    generate: qr_image
};